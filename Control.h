// ================================================================
// Control.h  —  제어 함수 선언
// v3.9.2 Final - SensorManager 통합 + FreeRTOS 최적화
// ================================================================

#pragma once

#include <Arduino.h>

// ================================================================
// 기본 제어 함수
// ================================================================

// 펌프 제어 (PWM)
void controlPump(bool enable, uint8_t pwm = 200);

// 밸브 제어
void controlValve(bool enable);

// 12V 전원 제어
void control12VMain(bool enable);
void control12VEmergency(bool enable);

// ================================================================
// 안전 함수
// ================================================================

// 안전 인터락 체크
bool checkSafetyInterlock(bool requestPump, bool requestValve);

// 비상 셧다운
void emergencyShutdown();

// 안전 검사
bool performSafetyCheck();

// ================================================================
// 자동 제어 함수 (SensorManager 통합)
// ================================================================

// 센서 기반 자동 제어 업데이트
void updateControl();

// 초기화
void initControl();

// ================================================================
// PWM 제어 함수
// ================================================================

// PWM 조절 (부드러운 가속/감속)
void setPumpPWM(uint8_t targetPWM, uint16_t rampTimeMs = 0);

// ================================================================
// 간편 제어 함수 (호환성)
// ================================================================

// 간편 펌프 제어 (기본 PWM)
void setPump(bool on);

// 간편 밸브 제어
void setValve(bool on);

// ================================================================
// 상태 출력
// ================================================================

// 제어 상태 출력
void printControlStatus();
